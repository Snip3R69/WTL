<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Google</title>
  </head>
  <body>
    <h1>Padhleta madarchodam</h1>
    <ul id="fileList"></ul>
    <script>
      const username = "Snip3R69";
      const repoName = "WTL";

      fetch(`https://api.github.com/repos/${username}/${repoName}/contents`)
        .then(response => response.json())
        .then(data => {
          let fileList = "";
          data.forEach(item => {
            if (item.type === "file") {
              fileList += `<li><a href="#" onclick="getFileContent('${item.url}')">${item.path}</a></li>`;
            } else if (item.type === "dir") {
              fileList += `<li>${item.path}</li>`;
              fetch(item.url)
                .then(response => response.json())
                .then(data => {
                  let subFileList = "";
                  data.forEach(file => {
                    subFileList += `<li><a href="#" onclick="getFileContent('${file.url}')">${file.path}</a></li>`;
                  });
                  document.querySelector(`#fileList li:last-of-type`).innerHTML += `<ul>${subFileList}</ul>`;
                });
            }
          });
          document.getElementById("fileList").innerHTML = fileList;
        });

      function getFileContent(fileUrl) {
        fetch(fileUrl)
          .then(response => response.json())
          .then(data => {
            let content = atob(data.content);
            document.body.innerHTML = `<pre>${content}</pre>`;
          });
      }
    </script>
  </body>
</html>
